<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://lonquan.github.io</id>
    <title>半壁峰林-龙权的自留地</title>
    <updated>2020-04-01T08:05:49.305Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://lonquan.github.io"/>
    <link rel="self" href="https://lonquan.github.io/atom.xml"/>
    <subtitle>半壁峰林-龙权的自留地</subtitle>
    <logo>https://lonquan.github.io/images/avatar.png</logo>
    <icon>https://lonquan.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, 半壁峰林-龙权的自留地</rights>
    <entry>
        <title type="html"><![CDATA[微信「小程序直播」]]></title>
        <id>https://lonquan.github.io/post/xiao-cheng-xu-zhi-bo-zhi-chi-fu-wu-shang-jie-ru/</id>
        <link href="https://lonquan.github.io/post/xiao-cheng-xu-zhi-bo-zhi-chi-fu-wu-shang-jie-ru/">
        </link>
        <updated>2020-03-22T07:59:52.000Z</updated>
        <content type="html"><![CDATA[<h2 id="申请要求">申请要求</h2>
<ol>
<li>小程序开发者为国内非个人主体开发者，且小程序类目在开放类目中；</li>
<li>小程序所属主体近半年内没有严重违规记录；</li>
<li>小程序所属主体在微信生态内的用户运营、商业变现及投放推广的效果达标；</li>
<li>具体申请要求请查看《微信小程序直播功能准入要求》；</li>
</ol>
<h2 id="功能简介">功能简介</h2>
<p><strong>小程序直播</strong>是微信提供给开发者的实时视频直播工具，包括直播管理端、主播端和观众端等模块，支持提供常用的用户互动和营销促销工具；<br>
开发者只需在小程序中引入相关代码并在管理后台完成配置，即可向用户提供直播服务，在小程序内流畅完成购买交易闭环，提升转化率；</p>
<p>##功能展示<br>
<img src="https://lonquan.github.io/post-images/1585728124705.jpg" alt="主播端" loading="lazy"><br>
<img src="https://lonquan.github.io/post-images/1585728146719.jpg" alt="观众端" loading="lazy"></p>
<h2 id="完整准入要求">完整准入要求</h2>
<ul>
<li>
<p>类目要求：</p>
<ol>
<li>小程序开发者为国内非个人主体开发者；</li>
<li>小程序开发者为“电商平台”或“商家自营”类目下的 17 个垂直品类，具体可参考《微信小<br>
程序开放的服务类目》：
<ul>
<li>电商平台；</li>
<li>商家自营-百货；</li>
<li>商家自营-食品；</li>
<li>商家自营-初级食用农产品；</li>
<li>商家自营-酒/盐；</li>
<li>商家自营-图书报刊/音像/影视/游戏/动漫；</li>
<li>商家自营-汽车/其他交通工具的配件；</li>
<li>商家自营-服装/鞋/箱包；</li>
<li>商家自营-玩具/母婴用品(不含食品)；</li>
<li>商家自营-家电/数码/手机；</li>
<li>商家自营-美妆/洗护；</li>
<li>商家自营-珠宝/饰品/眼镜/钟表；</li>
<li>商家自营-运动/户外/乐器；</li>
<li>商家自营-鲜花/园艺/工艺品；</li>
<li>商家自营-家居/家饰/家纺；</li>
<li>商家自营-汽车内饰/外饰；</li>
<li>商家自营-办公/文具；</li>
<li>商家自营-机械/电子器件</li>
</ul>
</li>
</ol>
</li>
<li>
<p>运营要求：</p>
<ol>
<li>主体下小程序近半年没有严重违规</li>
<li>小程序近90天存在支付行为</li>
<li>以上2个运营条件和类目同时满足的前提下，下面3个条件满足其一即可</li>
<li>主体下公众号累计粉丝数大于100</li>
<li>主体下小程序近7日dau大于100</li>
<li>主体在微信生态内近一年广告投放实际消耗金额大于1w</li>
</ol>
</li>
</ul>
<p>以上准入要求于 2020 年 02 月 24 日进行公示生效。为营造良好健康的微信生态，腾讯公<br>
司有权对《微信小程序直播功能准入要求》不时予以调整并公布，请予以关注。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[node cli error]]></title>
        <id>https://lonquan.github.io/post/node-cli-error/</id>
        <link href="https://lonquan.github.io/post/node-cli-error/">
        </link>
        <updated>2020-03-03T18:12:35.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>npm WARN lifecycle The node binary used for scripts is /path/detail/ but npm is using /usr/local/path/node itself. Use the <code>--scripts-prepend-node-path</code> option to include the path for the node binary npm was executed with.</p>
</blockquote>
<blockquote>
<p>npm config set scripts-prepend-node-path true</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[腾讯看点直播入驻流程及商家答疑]]></title>
        <id>https://lonquan.github.io/post/ma-yi-kan-dian-teng-xun-kan-dian-zhi-bo-ru-zhu-liu-cheng-ji-shang-jia-da-yi/</id>
        <link href="https://lonquan.github.io/post/ma-yi-kan-dian-teng-xun-kan-dian-zhi-bo-ru-zhu-liu-cheng-ji-shang-jia-da-yi/">
        </link>
        <updated>2020-03-03T13:38:12.000Z</updated>
        <content type="html"><![CDATA[<h4 id="腾讯直播申请要求">腾讯直播申请要求</h4>
<ol>
<li>用要直播的微信号点击申请</li>
<li>微信号（社群）或公众号的私域粉丝数大于等于500</li>
<li>类目选择必须跟营业执照相同</li>
<li>有营业执照拍摄清晰</li>
<li>官方软件使用费599/半年 腾讯直播不抽点不提成</li>
<li>必须苹果手机（腾讯直播目前仅支持苹果系统手机使用最好8以上）</li>
<li>申请开通后一周内需完成首播，时长≥1小时，人气≥500</li>
<li>产品为非禁售品，详情请阅读《腾讯直播禁售类目规则》</li>
<li>申请途径关注私聊我发送</li>
<li>不要填错任何信息，审核不过没有办法修改，只能3个月以后办理退款</li>
<li>以下是不能在直播间~涉及封建迷信玄学命理， 涉黄（黄段子），谈及两性话题，卖虚拟产品，卖虚拟课程，卖会员，卖社群，卖各种赚钱模式（包括微商）涉及医疗，无实物类虚拟产品禁止谈论和出售。</li>
</ol>
<h3 id="答疑">答疑</h3>
<ol>
<li>
<p>什么是腾讯直播？腾讯直播和腾讯看点直播之间的关系？<br>
答：腾讯直播是在微信平台上提供预约及观看直播的工具，为内容主和商家提供专业稳定便捷的在线直播的解决方案，是腾讯官方在微信生态下唯一官方直播工具。<br>
腾讯直播 APP 是 toB 侧工具，是商家创建直播计划的后台；而用户在微信生态中使用腾讯看点直播小程序观看直播。</p>
</li>
<li>
<p>我没有公众号，是否可以申请权限？<br>
答：可以申请。如果您是商家/主播/KOL，只要有微信私域流量，不需要有公众号，均可以申请直播权限。<br>
私域流量指在微信生态中的流量，包含微信公众号、微信群、个人微信等。</p>
</li>
<li>
<p>如何获取腾讯直播权限？<br>
答：第一步苹果手机 中下载“腾讯直播”APP，完成注册获取“腾讯直播 ID”；私我获取开通链接，教你开通。</p>
</li>
<li>
<p>注册时实名认证不成功？<br>
答：填写的姓名和身份证号需要与注册腾讯直播账号时，获取验证码的手机号实名认证一致。 注册手机号要求：获取验证码的手机号必须是在运营商做了实名认证的个人手机号。</p>
</li>
<li>
<p>腾讯直播支持推流直播吗？<br>
答：腾讯直播目前支持视频直播、语音直播和推流直播三种直播。</p>
</li>
<li>
<p>使用腾讯直播开播对开播端宽带/流量有什么要求？<br>
答：开播端宽带建议上行大于 4M。</p>
</li>
<li>
<p>创建直播计划时的标题和图片规范？<br>
答：标题不能超过 20 个中文字符，海报封面尺寸比例 5:4，最佳尺寸大小 900*720。</p>
</li>
<li>
<p>在做直播测试时，可以选择直播不公开吗？<br>
答：可以。在创建直播计划时，不勾选“公开直播”，直播将不会对外展示。</p>
</li>
<li>
<p>如何分享直播预热页面？<br>
答：创建完腾讯直播计划，可以在左下角选择分享至好友，社群，朋友圈等。</p>
</li>
<li>
<p>腾讯直播电商直播有几种方式？如果想要使用跳转小程序的方式来直播，有什么流程？<br>
答：腾讯直播电商支持 3 种模式。</p>
</li>
</ol>
<ul>
<li>
<p>插件：腾讯直播接入的电商插件为微店。如果商家拥有微店，创建直播计划后即可开<br>
播，无排期限制。（京东、拼多多正在逐步接入中）</p>
</li>
<li>
<p>跳转小程序：如果商家自己有小程序，腾讯直播可支持跳转到商家的小程序带货。需<br>
提前一周把账号名称，开播时间及跳转的小程序名称、小程序 appid 和落地页路径提交给腾讯直播负责人审核。<br>
注：小程序跳转申请请遵守公约《腾讯直播小程序跳转公约》</p>
</li>
<li>
<p>H5：如果商家自己有小程序，可以将腾讯直播 H5 内嵌到商家小程序中开播。</p>
</li>
</ul>
<ol start="11">
<li>
<p>腾讯直播直播间有什么功能？是否支持发放优惠券（红包）？<br>
答：腾讯直播支持点赞、公告板、发放优惠券等功能。</p>
</li>
<li>
<p>腾讯直播可以实现边听边买，边听边聊天吗？<br>
答：直播间的主播可以引导用户点击“耳机”按钮，用户即可实现边听边买、边听边聊天</p>
</li>
<li>
<p>腾讯直播有哪些禁播类目和规则？<br>
答：详见《腾讯直播禁售类目》和《腾讯直播文明公约》</p>
</li>
<li>
<p>腾讯直播收费标准？<br>
答：腾讯直播官方技术服务费599/半年</p>
</li>
<li>
<p>微信直播和淘宝直播，抖音快手直播有什么区别？</p>
</li>
</ol>
<ul>
<li>开通的条件不同：淘宝直播，要求至少2万粉丝，皇冠级别才有资格开播。</li>
<li>快手直播，1万点击申请（有可能驳回）</li>
<li>直播的地方不同。我们是基于微信。</li>
</ul>
<blockquote>
<p>今时今日的微信，背后有11亿人的市场。微信是我们最常用的社交工具，淘宝、蘑菇街、快手等等，所有的分享是不是都需要通过微信来分享？以淘宝为例：你开淘宝直播，分享链接到微信，微信保存图片，然后打开淘宝app，在淘宝app识别图片，进入直播，光这样的操作，你的朋友进来的可能性就要损失一半以上，因为嫌麻烦。而微信直播呢，你开微信直播，分享到微信，微信直接识别小程序，直接进入直播，直接购买产品，所有的操作都不需要离开微信，成交率就能大大的提高。<br>
不用养粉，不用每天播，不用开通第三方小店，不用下载软件，没有敏感词限制，不需要才艺颜值，因不靠打赏赚钱，你能讲清楚产品，品牌就行。</p>
</blockquote>
<ol start="16">
<li>
<p>用户在用的时候是否和抖音快手一样，没有关注的直播可以刷出来？（比如下滑那种）<br>
答：这个公域流量是根据优势度分配，12月16日，腾讯看点直播公布推出“引力播”计划，将对优秀商家进行扶持。</p>
</li>
<li>
<p>腾讯直播有什么优势？<br>
答：腾讯直播的优势：官方允许直播间直接挂微信，官方防封，而且微信内易于裂变。私域带动公域流量（官方流量入口，朋友圈广告投放）。另外推广初期官方会给优质主播巨额红包补贴、中心流量分发、微信广告折扣等。</p>
</li>
<li>
<p>如何暂停直播？暂停时效能维持多久（考虑到中午吃饭）？<br>
答：直播间不支持暂停的。</p>
</li>
<li>
<p>直播间最长能开多少个小时？<br>
答：没有限制时长，但是要求保证到网络能不中断。</p>
</li>
<li>
<p>直播过程中能否实时上库存，库存的更新时效需要多久（商户使用商城小程序）？<br>
答：是的，APP连接了你们的店铺，会自动更新。</p>
</li>
<li>
<p>直播间如何添加商品？<br>
答：集客小程序商城和公域流量活动开始时同时进行对接。如在试播期间需引流成交，建议在直播间设置公告板添加客服成交，同时可做成交活动。</p>
</li>
</ol>
<blockquote>
<p>如：分享直播间减5元，引导好友直播间成交各减10元，整点加客服抽奖。</p>
</blockquote>
<ol start="22">
<li>腾讯会不会提供公域流量？条件是什么？<br>
答：截止试播有效期20号内，完成3场有效直播获得优质商家排名资格。根据有效直播场次数，直播间人流/人气的3个阈值，进行优质商家排名。排名越靠前分配越多公域流量。</li>
</ol>
<blockquote>
<p>公域流量扶持活动具体时间及通知，等待腾讯官方文件。（集客优先及时反馈信息）</p>
</blockquote>
<ol start="23">
<li>
<p>创建直播计划以后如何分享，私域流量怎么进入？<br>
答：创建完直播计划后，在左下角选择生成直播分享海报转发至好友，社群，朋友圈等。用户可通过订阅或扫码进入直播间，在直播中可引导粉丝分享直播间。</p>
</li>
<li>
<p>私域粉丝不多或不进直播间，怎么完成有效直播?<br>
答：在建完直播计划后，可以拉个100-200人的直播群。发个小红包让大家帮忙点点，在直播可以做点人气满200免单的活动或分享活动。在微信号的好友，朋友圈，社群都分享下直播海报。<br>
500人气是指直播间的点击次数，1位用户点击进入3次算3个人气。直播UV人流50-100左右即可</p>
</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Husky+Lint Staged配置]]></title>
        <id>https://lonquan.github.io/post/huskylint-staged-config/</id>
        <link href="https://lonquan.github.io/post/huskylint-staged-config/">
        </link>
        <updated>2019-11-27T20:51:52.000Z</updated>
        <content type="html"><![CDATA[<h1 id="husky-配置">Husky 配置</h1>
<pre><code>stylelint&quot;: &quot;^10.1.0&quot;,
</code></pre>
<p>安装依赖</p>
<pre><code>yarn add husky lint-staged stylelint stylelint-config-recommended  
</code></pre>
<p>package.json 配置</p>
<pre><code>&quot;husky&quot;: {
    &quot;hooks&quot;: {
        &quot;pre-commit&quot;: &quot;lint-staged&quot;
    }
},
&quot;lint-staged&quot;: {
    &quot;*.{js,jsx,ts,tsx}&quot;: [
        &quot;eslint --fix&quot;
    ],
    &quot;*.{css,scss}&quot;: [
        &quot;stylelint --fix&quot;
    ]
}

</code></pre>
<p>.stylelintrc</p>
<pre><code>{
    &quot;extends&quot;: &quot;stylelint-config-recommended&quot;,
    &quot;rules&quot;: {
        &quot;at-rule-no-unknown&quot;: null,
        &quot;number-leading-zero&quot;: null,
        &quot;no-descending-specificity&quot;: null,
        &quot;declaration-colon-newline-after&quot;: null,
        &quot;font-family-no-missing-generic-family-keyword&quot;: null
    }
}

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[那些 Laravel 中的黑魔法]]></title>
        <id>https://lonquan.github.io/post/laravel-so-cool/</id>
        <link href="https://lonquan.github.io/post/laravel-so-cool/">
        </link>
        <updated>2019-10-23T20:50:04.000Z</updated>
        <content type="html"><![CDATA[<h1 id="laravel-黑魔法">Laravel 黑魔法</h1>
<pre><code class="language-php">// 环境判断
$isLocal = app()-&gt;environment('local');
$isLocal = app()-&gt;isLocal();

// find 多主键值
User::find([1, 2, 3]);
User::findMany([1, 2, 3])

// 自定义宏
Request::macro('staff', function () {
    return [];
});
\request()-&gt;staff();

// XorY 方法
// 不不存在则抛出异常
Model::findOrFail($id, $columns = ['*']);
// 不不存在则返回⼀一个新的实例例
Model::findOrNew($id, $columns = ['*']);
// 不不存在满⾜足条件的则抛出异常
Model::firstOrFail($columns = ['*']);
// 不不存在满⾜足条件的则返回⼀一个新的实例例
Model::firstOrNew(array $attributes, array $values = []);
// 不不存在满⾜足条件的则返回⼀一个新的实例例并⼊入库
Model::firstOrCreate(array $attributes, array $values = []);
// 不不存在满⾜足条件的记录时，交给你的 $callback 处理理
Model::firstOr($columns = ['*'], Closure $callback = null);
// 存在则更更新，不不存在则创建
Model::updateOrCreate(array $attributes, array $values = []);

// 模型事件
class User extends Model
{
    protected static function boot()
    {
        parent::boot();
        static::creating(function($user){ ... });
        static::created(function($user){ ... });
        static::saving(function($user){ ... });
        static::saved(function($user){ ... });
        static::updating(function($user){ ... });
        static::updated(function($user){ ... });
        static::deleting(function($user){ ... });
        static::deleted(function($user){ ... });
        static::restoring(function($user){ ... });
        static::restored(function($user){ ... });
        static::retrieved(function($user){ ... }); 
    }
}

// 模型默认值
class Task extends Model
{
     //...
    $attributes = [
        'priority' =&gt; static::PRIORITY_NONE,
        'visibility' =&gt; static::VISIBILITY_TEAM,
    ];
    
}
$task = new Task;
$task-&gt;priority; // 'none'
$task-&gt;visibility; // 'team'

// Model::when
$query = Model::query();
$query-&gt;when(expression, function($q){
    return $q;
})

// BelongsTo 默认模型, 带条件与排序的模型关系
class Post extends Model
{
    public function author()
    {
        // where('approved', 1)-&gt;orderBy('email');
        return $this-&gt;belongsTo('App\Author')-&gt;withDefault([
            'name' =&gt; '⽆无',
        ]);
    }
}
$post-&gt;author-&gt;name $post-&gt;author-&gt;name ?? '⽆'

// 模型复制
$newModel = $model-&gt;replicate();
$newModel-&gt;save();

// 分段查询/处理
User::chunk(100, function ($users) {
    foreach ($users as $user) {
        $user-&gt;refreshProperty();
    }
});

// Save 时不更新时间字段 updated_at
$product = Product::find(1);
$product-&gt;updated_at = '2018-11-11 11:11:11';
$product-&gt;save(['timestamps' =&gt; false]);
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Linux 常用备忘]]></title>
        <id>https://lonquan.github.io/post/linux-chang-yong-bei-wang/</id>
        <link href="https://lonquan.github.io/post/linux-chang-yong-bei-wang/">
        </link>
        <updated>2019-03-02T20:36:28.000Z</updated>
        <content type="html"><![CDATA[<h4 id="centos-常用命令">CentOS 常用命令😇😇</h4>
<pre><code class="language-bash"># 查看磁盘空间
df -h

# 查看目录占用空间大小
du -sh

# 进程总数
ps aux | wc -l

#终止进程
kill -9 `ps -ef | grep 'supervisor' | awk '{print $2}'`
kill -9 `lsof -i:9200 | awk '{print $2}'`

# 查看端口占用
lsof -i:6379
netstat -anp tcp | grep 5601   

# 删除文件
find / -mtime +30 -name &quot;*.log&quot; -exec rm -rf {} \
find ./ -mtime +30 -type f | xargs rm -rf

# 查看端口占用
netstat -nlp |grep 9200 

# 查看DNS解析
nslookup domain.com
dig domain.com A/CNAME
whois domain 

# 添加用户到组
usermod -a -G groupname username 

# 修改 ssh 超时时间
vim /etc/ssh/sshd_config
#ClientAliveInterval 60
#ClientAliveCountMax 3
#systemctl restart sshd

# 系统运行时间
uptime

# 查看内存
free -h

# 查看主机名称
hostname or hostnamectl 

# 修改主机名称
sudo hostnamectl set-hostname name

# 禁止 ping
vim /etc/sysctl.conf
net.ipv4.icmp_echo_ignore_all = 0
sysctl -p

# 以某个用户执行命令
sudo -Hu www /usr/local/php/bin/php artisan config:cache

# 生成 ssh 公钥
ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;

# 同步 ssh 免密登录
ssh-copy-id root@ip

# ssh 不同 publickey (~/.ssh/config 文件)
Host events_api_deploy
    HostName git.coding.net
    User git
    IdentitiesOnly yes
    IdentityFile /root/.ssh/events_api_deploy
# 连接的时候
git clone -b master  --recursive -q events_api_deploy:soda/qc_events.git

# scp 复制文件指定公钥
scp -P 8222 -i qcloud_event_id_rsa -r root@host:/data/path/ /data/path

# MySQL 创建数据库指定字符集
create database jjd_tcc default character set = 'utf8mb4';
</code></pre>
<h4 id="安装-lnmp">安装 lnmp</h4>
<pre><code class="language-bash"># 格式硬盘
wget http://mirrors.linuxeye.com/scripts/auto_fdisk.sh
chmod +x ./auto_fdisk.sh
./auto_fdisk.sh

# 安装依赖
yum -y install wget screen curl python

# 下载源码
wget http://mirrors.linuxeye.com/lnmp-full.tar.gz
tar xzf lnmp-full.tar.gz
cd lnmp
screen -S lnmp
./install.sh
ssh port 8032

# 保持 ssh 连接

#deployer php 错误
ln -s /usr/local/php/bin/php /usr/local/bin/php

# 修改 Nginx config fastcgi 路径错误
/usr/local/nginx/conf/fastcgi.conf
fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;

#修改 php 设置 关闭 opcache 时间戳验证
/usr/local/php/etc/php.d/
opcache.validate_timestamps=1 =&gt; 0

# 修改 php 设置 设置函数限制
/usr/local/php/etc/php.ini
disable_functions = passthru,system,chroot,chgrp,chown,shell_exec,ini_alter,ini_restore,dl,openlog,syslog,readlink,popepassthru,stream_socket_server,fsocket,popen

# redis 扩展
/usr/local/php/etc/php.d/redis.conf
# 设置 redis 密码
/usr/local/redis/etc/redis.conf
requirepass nodejs_org_4ok123
service redis-server restart

# 安装 supervisor
yum -y install python-setuptools
easy_install supervisor
echo_supervisord_conf &gt; /data/supervisor/supervisord.conf
# 开机脚本
https://raw.githubusercontent.com/Supervisor/initscripts/master/centos-systemd-etcs

# 安装 composer 
https://getcomposer.org/download/
#设置中国镜像
composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/

# 安装 node
wget https://nodejs.org/dist/v12.11.1/node-v12.11.1-linux-x64.tar.xz 
tar -xvJf node-v8.11.1-linux-x64.tar.xz
ln -s /root/node-v12.11.1-linux-x64/bin/node /usr/bin/node
ln -s /root/node-v12.11.1-linux-x64/bin/npm /usr/bin/npm
ln -s /root/node-v12.11.1-linux-x64/bin/npx /usr/bin/npx
node -v &amp; npm -v
npm i -g yrm
yrm use taobao

# 安装 Git
1. sudo yum groupinstall &quot;Development Tools&quot;
2. sudo yum install zlib-devel perl-ExtUtils-MakeMaker asciidoc xmlto openssl-devel
3. wget -O git.zip https://github.com/git/git/archive/master.zip
4. unzip git.zip
5. cd git-master
6. autoconf
7. ./configure
8. make &amp;&amp; make install
9. yum remove git
10. whereis git 删除掉上面的文件 
11. ln -s /path/git-master/git /usr/bin/git
12. git --version // git version 2.7.0

# composer install 参数
composer install --no-progress --no-suggest --ansi --no-interaction
* --no-progress: 移除进度信息，这可以避免一些不处理换行的终端或脚本出现混乱的显示。
* --no-suggest： 不要显示建议
* --ansi 强制 ANSI输出
* --no-interaction 不询问交互

# horizon:purge 应作为部署的一部分
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[中文文案排版指北（简体中文版）]]></title>
        <id>https://lonquan.github.io/post/doc-zh-cn/</id>
        <link href="https://lonquan.github.io/post/doc-zh-cn/">
        </link>
        <updated>2017-03-02T10:29:23.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="空格">空格</h3>
<p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。<br>
与大家共勉之。」</p>
]]></summary>
        <content type="html"><![CDATA[<h3 id="空格">空格</h3>
<p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。<br>
与大家共勉之。」</p>
<!-- more -->
<h4 id="中英文之间需要增加空格">中英文之间需要增加空格</h4>
<p>正确：</p>
<blockquote>
<p>在 LeanCloud 上，数据存储是围绕 AVObject 进行的。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>在LeanCloud上，数据存储是围绕 AVObject进行的。</p>
</blockquote>
<blockquote>
<p>在 LeanCloud上，数据存储是围绕AVObject 进行的。</p>
</blockquote>
<p>完整的正确用法：</p>
<blockquote>
<p>在 LeanCloud 上，数据存储是围绕 AVObject 进行的。每个 AVObject 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 AVObject 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p>
</blockquote>
<p>例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。</p>
<h4 id="中文与数字之间需要增加空格">中文与数字之间需要增加空格</h4>
<p>正确：</p>
<blockquote>
<p>今天出去买菜花了 5000 元。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>今天出去买菜花了 5000元。</p>
</blockquote>
<blockquote>
<p>今天出去买菜花了5000元。</p>
</blockquote>
<h4 id="数字与单位之间需要增加空格">数字与单位之间需要增加空格</h4>
<p>正确：</p>
<blockquote>
<p>我家的光纤入户宽带有 10 Gbps，SSD 一共有 20 TB。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>我家的光纤入户宽带有 10Gbps，SSD 一共有 10TB。</p>
</blockquote>
<p>例外：度／百分比与数字之间不需要增加空格：<br>
正确：</p>
<blockquote>
<p>今天是 233° 的高温。</p>
</blockquote>
<blockquote>
<p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>今天是 233 ° 的高温。</p>
</blockquote>
<blockquote>
<p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p>
</blockquote>
<h4 id="全角标点与其他字符之间不加空格">全角标点与其他字符之间不加空格</h4>
<p>正确：</p>
<blockquote>
<p>刚刚买了一部 iPhone，好开心！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>刚刚买了一部 iPhone ，好开心！</p>
</blockquote>
<h3 id="标点符号">标点符号</h3>
<p><strong>不重复使用标点符号</strong><br>
正确：</p>
<blockquote>
<p>德国队竟然战胜了巴西队！</p>
</blockquote>
<blockquote>
<p>她竟然对你说「喵」？！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>德国队竟然战胜了巴西队！！</p>
</blockquote>
<blockquote>
<p>德国队竟然战胜了巴西队！！！！！！！！</p>
</blockquote>
<blockquote>
<p>她竟然对你说「喵」？？！！</p>
</blockquote>
<blockquote>
<p>她竟然对你说「喵」？！？！？？！！</p>
</blockquote>
<h4 id="全角和半角">全角和半角</h4>
<p><strong>不明白什么是全角（全形）与半角（半形）符号？请查看维基百科词条『<a href="http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2">全角和半角</a>』。</strong></p>
<h4 id="使用全角中文标点">使用全角中文标点</h4>
<p>正确：</p>
<blockquote>
<p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p>
</blockquote>
<blockquote>
<p>核磁共振成像（NMRI）是什么原理都不知道？JFGI！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎!</p>
</blockquote>
<blockquote>
<p>嗨!你知道嘛?今天前台的小妹跟我说”喵”了哎!</p>
</blockquote>
<blockquote>
<p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p>
</blockquote>
<blockquote>
<p>核磁共振成像(NMRI)是什么原理都不知道?JFGI!</p>
</blockquote>
<h4 id="数字使用半角字符">数字使用半角字符</h4>
<p>正确：</p>
<blockquote>
<p>这件蛋糕只卖 1000 元。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>这件蛋糕只卖 １０００ 元。</p>
</blockquote>
<p>例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。</p>
<h4 id="遇到完整的英文整句-特殊名词其內容使用半角标点">遇到完整的英文整句、特殊名词，其內容使用半角标点</h4>
<p>正确：</p>
<blockquote>
<p>乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」</p>
</blockquote>
<blockquote>
<p>推荐你阅读《Hackers &amp; Painters: Big Ideas from the Computer Age》，非常的有趣。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」</p>
</blockquote>
<blockquote>
<p>推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。</p>
</blockquote>
<h4 id="名词">名词</h4>
<p><strong>专有名词使用正确的大小写</strong><br>
大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论內容，在这里只对部分易错用法进行简述。<br>
正确：</p>
<blockquote>
<p>使用 GitHub 登录</p>
</blockquote>
<blockquote>
<p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>使用 github 登录</p>
</blockquote>
<blockquote>
<p>使用 GITHUB 登录</p>
</blockquote>
<blockquote>
<p>使用 Github 登录</p>
</blockquote>
<blockquote>
<p>使用 gitHub 登录</p>
</blockquote>
<blockquote>
<p>使用 gｲんĤЦ8 登录</p>
</blockquote>
<blockquote>
<p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p>
</blockquote>
<blockquote>
<p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p>
</blockquote>
<blockquote>
<p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p>
</blockquote>
<blockquote>
<p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p>
</blockquote>
<blockquote>
<p>我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。</p>
</blockquote>
<p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标准的大小写规范进行书写；并通过 text-transform: uppercase;<br>
／text-transform: lowercase; 对表现形式进行定义。</p>
<h4 id="不要使用不地道的缩写">不要使用不地道的缩写</h4>
<p>正确：</p>
<blockquote>
<p>我们需要一位熟悉 JavaScript、HTML5，至少理解一种框架（如 Backbone.js、AngularJS、React 等）的前端开发者。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>我们需要一位熟悉 Js、h5，至少理解一种框架（如 backbone、angular、RJS 等）的 FED。</p>
</blockquote>
<h3 id="争议">争议</h3>
<p><strong>以下用法略带有个人色彩，既：无论是否遵循下述规则，从语法的角度来讲都是</strong>正确**的。</p>
<h4 id="链接之间增加空格">链接之间增加空格</h4>
<p>用法：</p>
<blockquote>
<p>请 <a href="http://mazhuang.org/wiki/chinese-copywriting-guidelines/#">提交一个 issue</a> 并分配给相关同事。</p>
</blockquote>
<blockquote>
<p>访问我们网站的最新动态，请 <a href="http://mazhuang.org/wiki/chinese-copywriting-guidelines/#">点击这里</a> 进行订阅！</p>
</blockquote>
<p>对比用法：</p>
<blockquote>
<p>请<a href="http://mazhuang.org/wiki/chinese-copywriting-guidelines/#">提交一个 issue</a> 并分配给相关同事。</p>
</blockquote>
<blockquote>
<p>访问我们网站的最新动态，请<a href="http://mazhuang.org/wiki/chinese-copywriting-guidelines/#">点击这里</a>进行订阅！</p>
</blockquote>
<h4 id="简体中文使用直角引号">简体中文使用直角引号</h4>
<p>用法：</p>
<blockquote>
<p>「老师，『有条不紊』的『紊』是什么意思？」</p>
</blockquote>
<p>对比用法：</p>
<blockquote>
<p>“老师，‘有条不紊’的‘紊’是什么意思？”</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[MySQL 存储过程]]></title>
        <id>https://lonquan.github.io/post/mysql-cun-chu-guo-cheng/</id>
        <link href="https://lonquan.github.io/post/mysql-cun-chu-guo-cheng/">
        </link>
        <updated>2016-07-02T10:27:10.000Z</updated>
        <content type="html"><![CDATA[<p>##创建存储过程</p>
<p>####删除已经存在的存储过程A</p>
<pre><code class="language-php">drop procedure if exists procedure_name;
</code></pre>
<h4 id="设置分割符">设置分割符</h4>
<pre><code>DELIMITER //
create procedure procedure_name(IN id INT)
begin
-- start transaction

-- 执行的 SQL

-- commit;
-- rollback

end //
DELIMITER ; -- 这里有空格
</code></pre>
<p>首先改变默认的分隔符为 // 来作为存储过程结束的标识，随后再恢复默认值。</p>
<h4 id="参数限制">参数限制</h4>
<p>in: 给参数传入值，定义的参数就得到了值<br>
out: 模式定义的参数只能在过程体内部赋值，表示该参数可以将某个值传递回调用他的过程（在存储过程内部，该参数初始值为 null，无论调用者是否给存储过程参数设置值）<br>
inout: 调用者还可以通过 inout 参数传递值给存储过程，也可以从存储过程内部传值给调用者</p>
<h4 id="参数类型">参数类型</h4>
<p>MySQL 所有数据类型<br>
int<br>
tinyint<br>
float<br>
decimal<br>
varchar<br>
...</p>
<p>FIND_IN_SET(str,strlist) 如果字符串str是在的strlist组成的N子串的字符串列表，返回值的范围为1到N SELECT FIND_IN_SET('1','1,2,3,4,5');</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[群聊记事(Json 验证/命名方式/closure $this/多维数组去重/清除数据)]]></title>
        <id>https://lonquan.github.io/post/qunliao-1/</id>
        <link href="https://lonquan.github.io/post/qunliao-1/">
        </link>
        <updated>2016-06-05T09:57:47.000Z</updated>
        <summary type="html"><![CDATA[<ol>
<li>Json 格式验证</li>
</ol>
<blockquote>
<p>昨天是谁验证 json 格式来着, json_decode 的时候, 如果传入的是整形, 是直接返回 对应的值, 所以判断是不是, 还是得 is_object 跟 is_array 吧</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<ol>
<li>Json 格式验证</li>
</ol>
<blockquote>
<p>昨天是谁验证 json 格式来着, json_decode 的时候, 如果传入的是整形, 是直接返回 对应的值, 所以判断是不是, 还是得 is_object 跟 is_array 吧</p>
</blockquote>
<!-- more -->
<h4 id="littlehz">littlehz</h4>
<blockquote>
<p>如果是内部函数调用，就不应该设计成参数是json串。如果是对外的API，接收php://input raw数据，那就粗略检查下是否以 { 开头, } 结尾就行。API的设计不可能没有key 而直接传数组或者数字或者boolean的</p>
</blockquote>
<h4 id="abraham">Abraham</h4>
<blockquote>
<p>return !is_numeric(<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;&amp;&#039; at position 6: str) &amp;̲&amp; null !== json…'>str) &amp;&amp; null !== json_decode(</span>str)</p>
</blockquote>
<ol start="2">
<li>命名方式</li>
</ol>
<blockquote>
<p>数组下划线的原因主要是为了json, 与mysql字段保持一致, 函数也是下划线命名,与php内置函数一样, 方法与类名其它都驼峰</p>
</blockquote>
<ol start="3">
<li>closure $this</li>
</ol>
<pre><code class="language-php">class Demo{
    public function test(){
        $var = 'var';
        call_user_func(function(){
            var_dump($this);
            //var_dump($var);
        });
    }
}

(new Demo)-&gt;test();
</code></pre>
<p>打印 $this 的时候, 可以打印该对象本身, $var, 就需要 use 才能使用.</p>
<p>php 的 closure，里面变量作用域，是 “定义时” 代码所在的作用域。<br>
是否这样理解, $this 的作用域是整个 object, 只要是整个 object 的里, $this 都表示 object 本身, 不论是否在闭包中?</p>
<h4 id="tomoe-大神">tomoe 大神</h4>
<p>還有一點是 closure 中的 $this 在 php5.3 版本是不支援的，會出錯，5.4 以後才支援，至於 $this 是不是都表示 object 本身還是有一些奇特方法會造成其 context (上下文)改變，例如</p>
<pre><code class="language-php">class A {
    public $value = &quot;A&quot;; 
    function getClosure() {
        return function() {
            echo $this-&gt;value, &quot;\n&quot;; 
        }; 
    }
}

class B {
    public $value = &quot;B&quot;;
}
$a = new A();
$b = new B();

call_user_func($a-&gt;getClosure()); // 顯示 A
call_user_func($a-&gt;getClosure()-&gt;bindTo($b, $b)); // 顯示 B
</code></pre>
<p>bindTo 會改變 closure 的 context</p>
<ol start="4">
<li>php 多维数组去重</li>
</ol>
<pre><code class="language-php">function super_unique($array, $recursion = false){
    // 序列化数组元素,去除重复
    $result = array_map('unserialize', array_unique(array_map('serialize', $array))); 
   // 递归调用
    if ($recursion) {
        foreach ($result as $key =&gt; $value) {
            if (is_array($value)) {
                $result[ $key ] = super_unique($value);
           }
        }
    }
    return $result;
}
</code></pre>
<h4 id="已知问题">已知问题</h4>
<blockquote>
<p>递归处理的时候, 如果是关联数组并且有不同的 key 有相同的 value 的时候, 会被去除一个</p>
</blockquote>
<ol start="5">
<li>清楚数据</li>
</ol>
<pre><code class="language-bash">dd if=/dev/zero of=/dev/sda bs=16M
</code></pre>
<blockquote>
<p>万一给下一个租户用了能找回数据呢？已经重置系统、重置硬盘，再填0数据的。试了下直接填 /dev/urandom 随机数据太慢。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ubuntu 查看版本]]></title>
        <id>https://lonquan.github.io/post/ubuntu-get-version/</id>
        <link href="https://lonquan.github.io/post/ubuntu-get-version/">
        </link>
        <updated>2016-05-20T10:23:30.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>vagrant@homestead:~$ cat /proc/version</p>
</blockquote>
<pre><code class="language-bash">Linux version 3.19.0-25-generic (buildd@lgw01-20) (gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) ) #26~14.04.1-Ubuntu SMP Fri Jul 24 21:16:20 UTC 2015
</code></pre>
<blockquote>
<p>vagrant@homestead:~$ uname -a</p>
</blockquote>
<pre><code class="language-hasb">Linux homestead 3.19.0-25-generic #26~14.04.1-Ubuntu SMP Fri Jul 24 21:16:20 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
</code></pre>
<blockquote>
<p>vagrant@homestead:~$ lsb_release -a</p>
</blockquote>
<pre><code class="language-bash">No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 14.04.3 LTS
Release:	14.04
Codename:	trusty
</code></pre>
]]></content>
    </entry>
</feed>